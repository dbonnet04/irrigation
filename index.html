<!DOCTYPE html> 
<html>
<head>
<meta charset='utf-8' />
<title>Réseaux d'irrigation SIVU la Motte-du-Caire </title>

<link rel="stylesheet" href="reseaucss.css"> <!-- J'appelle mon fichier CSS dans le même dossier -->



<script src='https://api.mapbox.com/mapbox-gl-js/v2.4.1/mapbox-gl.js'></script>
<link href='https://api.mapbox.com/mapbox-gl-js/v2.4.1/mapbox-gl.css' rel='stylesheet' />

</head>
<body>
<header>
		<a href='https://iut.univ-amu.fr/fr/sites-geographiques/digne'><img src='data:image/png;base64,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' alt='logo IUT'>
		</a>
</header>
	
	
		
	<h1>Réseaux d'irrigation du SIVU la Motte-du-Caire</h1>
	
	
	<main>
	<section>


<!-- J'initialise le plugin Geocoder-->

<script src="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v5.0.0/mapbox-gl-geocoder.min.js"></script>
<link rel="stylesheet" href="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v5.0.0/mapbox-gl-geocoder.css" type="text/css">

<div id='map' class='map'></div>

<div class='map-overlay-2 top'>
    <div class='map-overlay-inner'>
        <fieldset>
            <label class="categoryLabel">Relevés GPS D.BONNET 2023</label>
				 <div>
                <input type="checkbox" id="prise-eauCB" value="prise-eau" onchange="switchlayer('prise-eau')"/> <!-- Supprimer checked de l'input pour ne pas être coché dès le début -->
                <label for="prise-eauCB">Prises d'eau</label>
				
            </div>
            <div>
                <input type="checkbox" id="canalisationsCB" value="canalisations" onchange="switchlayer('canalisations')"/>
                <label for="canalisationsCB">Canalisations</label>
            </div>
			<div>
                <input type="checkbox" id="reservoirsCB" value="reservoirs" onchange="switchlayer('reservoirs')"/>
                <label for="reservoirsCB">Réservoirs</label>
            </div>
			<div>
                <input type="checkbox" id="béliersCB" value="béliers" onchange="switchlayer('béliers')"/>
                <label for="béliersCB">Anti-coup de bélier</label>
            </div>
			<div>
                <input type="checkbox" id="vannesCB" value="vannes" onchange="switchlayer('vannes')"/>
                <label for="vannesCB">Vannes</label>
				
            </div>	
			<div>
                <input type="checkbox" id="bornesCB" value="bornes" onchange="switchlayer('bornes')"/>
                <label for="bornesCB">Bornes</label>
            </div>
				<div>
                <input type="checkbox" id="ventousesCB" value="ventouses" onchange="switchlayer('ventouses')" />
                <label for="ventousesCB">Ventouses</label>
            </div>
				
			</fieldset>
			<fieldset>
            <label class="categoryLabel">Topographie</label>
			  <div>
                <input type="checkbox" id="hydrologieCB" value="hydrologie" onchange="switchlayer('hydrologie')" />
                <label for="hydrologieCB">Hydrologie</label>
            </div
			  <div>
                <input type="checkbox" id="Batiments_3DCB" value="Batiments_3D" onchange="switchlayer('Batiments_3D')" />
                <label for="Batiments_3DCB">Bâtiments 3D</label>
            </div>
        </fieldset>
		
    </div>
</div>
</div>

<script>
// AccesToken
mapboxgl.accessToken = 
'pk.eyJ1IjoiZGFibzIyIiwiYSI6ImNremltNXR2aTMxaG0ydW8xYmcwOGU3YjUifQ.33TjJKovMQpZ1dkC0S9K3Q';

// Configuration de la carte

var map = new mapboxgl.Map({
container: 'map',
style: 'mapbox://styles/mapbox/satellite-streets-v12', <!-- Le modèle DEM fonctionne uniquement avec le style satellite streets-v12 -->
center: [6.02, 44.34],// En degré décimal depuis Géoportail
zoom: 12, // zoom
pitch: 80, // Inclinaison
bearing:41 // Rotation
});


		// AJout de donnees OSM

      // Configuration de la source Topographie
	map.on('style.load', () => {
			map.addSource('mapbox-dem', { // Définition de la source de donnée
				'type': 'raster-dem',
				'url': 'mapbox://mapbox.mapbox-terrain-dem-v1',  // On ajoute le MNT à notre carte
				'tileSize': 512,
				'maxzoom': 14
			});
        // add the DEM source as a terrain layer with exaggerated height
        map.setTerrain({ 'source': 'mapbox-dem', 'exaggeration': 1.5 }); // On ajoute une exagération de 1.5 pour la rendre réaliste
    

	//J'ajoute mes données importées dans le Tileset Mapbox
	

	
			// Ajout des prises d'eau
			
			
		
			map.addSource('prise-eau', { <!-- Ne pas mettre d'underscore dans l'appelation du nom de la source, ça ne marchait pas avec waypoints_co_brusquet j'ai alors supprimé les underscores pour garder uniquement waypoints-->
			type: 'vector',
			url: 'mapbox://dabo22.6rqpydq6'}); <!-- Bien ajouter l'id du tileset de Mapbox -->
			
			
			
			

			  map.loadImage('https://i.imgur.com/hboT1D2.png', function (error, green) { <!-- Je charge depuis mes images téléversées sur Imgur l'image normalisée de la prise d'eau -->
			//this is where we load the image file
            if (error) throw error;
            map.addImage("prise-eau", green); //this is where we name the image file we are loading
            map.addLayer({
                'id': 'prise-eau',
                'type': 'symbol',
                'source': 'prise-eau',
				"filter": ["all",["==", "type_ouv", "Prise d'eau"]], <!-- C'est génial, je peux filtrer selon le champ type_ouv: Ventouse, Prise d'eau, Borne d'irrigation, Autre: Anti-coup de Bélier -->
                'source-layer': 'bornes-8w8r5e',  <!-- ATTENTION de bien ajouter la source layer provenant de Mapbox -->
                'layout': {
                    'icon-image': "prise-eau",
                    'icon-size': 1.0,
                    'icon-allow-overlap': true,
					'visibility': 'none' <!-- Je n'affiche pas d'emblée la visibilité de la couche -->
                }
				});
			});

	
			// Ajout des canalisations
			
			map.addSource('canalisations', { <!-- Ne pas mettre d'underscore dans l'appelation du nom de la source, ça ne marchait pas avec waypoints_co_brusquet j'ai alors supprimé les underscores pour garder uniquement waypoints-->
			type: 'vector',
			url: 'mapbox://dabo22.1044tc81'}); <!-- Bien ajouter l'id du tileset de Mapbox -->
			
			map.addLayer({
			'id': 'canalisations', <!-- Donner le nom que l'on souhaite -->
			'type': 'line',
			'source': 'canalisations', <!-- Donner le nom que l'on souhaite -->
			'source-layer':'shp-30ren7',
			'layout': {'visibility': 'none', 'line-join': 'round','line-cap': 'round'},
			'paint': {'line-width': 2, 'line-color': 'blue',} <!--bien mettre line-width et line-color quand le type est line, la couleur est à bleue  -->
			});
			
			
			// Ajout des réservoirs
		
			map.addSource('reservoirs', { <!-- Ne pas mettre d'underscore dans l'appelation du nom de la source, ça ne marchait pas avec waypoints_co_brusquet j'ai alors supprimé les underscores pour garder uniquement waypoints-->
			type: 'vector',
			url: 'mapbox://dabo22.akgp2rht'}); <!-- Bien ajouter l'id du tileset de Mapbox -->
			
			map.loadImage("https://i.imgur.com/yEtGmUk.png", function (error, green) {
			//this is where we load the image file
            if (error) throw error;
            map.addImage("reservoirs", green); //this is where we name the image file we are loading
            map.addLayer({
                'id': 'reservoirs',
                'type': 'symbol',
                'source': 'reservoirs',
				"filter": ["all"], <!-- C'est génial, je peux filtrer selon le champ type_ouv: Ventouse, Prise d'eau, Borne d'irrigation, Autre: Anti-coup de Bélier -->
                'source-layer': 'reservoirs-cigcua',  <!-- ATTENTION de bien ajouter la source layer provenant de Mapbox -->
                'layout': {
                    'icon-image': "reservoirs",
                    'icon-size': 1.0,
                    'icon-allow-overlap': true,
					'visibility': 'none' <!-- Je n'affiche pas d'emblée la visibilité de la couche -->
                }
				});
				});
		
		
	
			
		
				
			// Ajout des anti - coup de bélier
			
			
				map.addSource('béliers', { <!-- Ne pas mettre d'underscore dans l'appelation du nom de la source, ça ne marchait pas avec waypoints_co_brusquet j'ai alors supprimé les underscores pour garder uniquement waypoints-->
			type: 'vector',
			url: 'mapbox://dabo22.6rqpydq6'}); <!-- Bien ajouter l'id du tileset de Mapbox -->
			
			  map.loadImage("https://img.icons8.com/external-those-icons-lineal-color-those-icons/24/external-Aries-zodiac-those-icons-lineal-color-those-icons-2.png", function (error, green) {
			//this is where we load the image file
            if (error) throw error;
            map.addImage("béliers", green); //this is where we name the image file we are loading
            map.addLayer({
                'id': 'béliers',
                'type': 'symbol',
                'source': 'béliers',
				"filter": ["all",["==", "ref_ouv", "Anti coup de bélier"]], <!-- C'est génial, je peux filtrer selon le champ type_ouv: Ventouse, Prise d'eau, Borne d'irrigation, Autre: Anti-coup de Bélier -->
                'source-layer': 'bornes-8w8r5e',  <!-- ATTENTION de bien ajouter la source layer provenant de Mapbox -->
                'layout': {
                    'icon-image': "béliers",
                    'icon-size': 1.0,
                    'icon-allow-overlap': true,
					'visibility': 'none' <!-- Je n'affiche pas d'emblée la visibilité de la couche -->
                }
				});
				});
			
			
			// Ajout des vannes
		
			map.addSource('vannes', { <!-- Ne pas mettre d'underscore dans l'appelation du nom de la source, ça ne marchait pas avec waypoints_co_brusquet j'ai alors supprimé les underscores pour garder uniquement waypoints-->
			type: 'vector',
			url: 'mapbox://dabo22.6e94v67d'}); <!-- Bien ajouter l'id du tileset de Mapbox -->
			
			  map.loadImage("https://i.imgur.com/Dtc4xhp.png", function (error, green) {
			//this is where we load the image file
            if (error) throw error;
            map.addImage("vannes", green); //this is where we name the image file we are loading
            map.addLayer({
                'id': 'vannes',
                'type': 'symbol',
                'source': 'vannes',
				"filter": ["all"], <!-- C'est génial, je peux filtrer selon le champ type_ouv: Ventouse, Prise d'eau, Borne d'irrigation, Autre: Anti-coup de Bélier -->
				'source-layer':'vannes-33vr0y',   <!-- ATTENTION de bien ajouter la source layer provenant de Mapbox -->
                'layout': {
                    'icon-image': "vannes",
                    'icon-size': 1.0,
                    'icon-allow-overlap': true,
					'visibility': 'none' <!-- Je n'affiche pas d'emblée la visibilité de la couche -->
                }
				});
				});
				
				
			// Ajout des bornes
			
			
				map.addSource('bornes', { <!-- Ne pas mettre d'underscore dans l'appelation du nom de la source, ça ne marchait pas avec waypoints_co_brusquet j'ai alors supprimé les underscores pour garder uniquement waypoints-->
			type: 'vector',
			url: 'mapbox://dabo22.6rqpydq6'}); <!-- Bien ajouter l'id du tileset de Mapbox -->
			
			  map.loadImage("https://i.imgur.com/WYvVcMS.png", function (error, green) {
			//this is where we load the image file
            if (error) throw error;
            map.addImage("arrosage", green); //this is where we name the image file we are loading
            map.addLayer({
                'id': 'bornes',
                'type': 'symbol',
                'source': 'bornes',
				"filter": ["all",["==", "type_ouv", "Borne d'irrigation"]], <!-- C'est génial, je peux filtrer selon le champ type_ouv: Ventouse, Prise d'eau, Borne d'irrigation, Autre: Anti-coup de Bélier -->
                'source-layer': 'bornes-8w8r5e',  <!-- ATTENTION de bien ajouter la source layer provenant de Mapbox -->
                'layout': {
                    'icon-image': "arrosage",
                    'icon-size': 1.0,
                    'icon-allow-overlap': true,
					'visibility': 'none' <!-- Je n'affiche pas d'emblée la visibilité de la couche -->
                }
				});
				});
				
			// Ajout des ventouses
			
			
				map.addSource('ventouses', { <!-- Ne pas mettre d'underscore dans l'appelation du nom de la source, ça ne marchait pas avec waypoints_co_brusquet j'ai alors supprimé les underscores pour garder uniquement waypoints-->
			type: 'vector',
			url: 'mapbox://dabo22.6rqpydq6'}); <!-- Bien ajouter l'id du tileset de Mapbox -->
			
			  map.loadImage("https://i.imgur.com/eJ8TySQ.png", function (error, green) {
			//this is where we load the image file
            if (error) throw error;
            map.addImage("ventouses", green); //this is where we name the image file we are loading
            map.addLayer({
                'id': 'ventouses',
                'type': 'symbol',
                'source': 'ventouses',
				"filter": ["all",["==", "type_ouv", "Ventouse"]], <!-- C'est génial, je peux filtrer selon le champ type_ouv: Ventouse, Prise d'eau, Borne d'irrigation, Autre: Anti-coup de Bélier -->
                'source-layer': 'bornes-8w8r5e',  <!-- ATTENTION de bien ajouter la source layer provenant de Mapbox -->
                'layout': {
                    'icon-image': "ventouses",
                    'icon-size': 1.0,
                    'icon-allow-overlap': true,
					'visibility': 'none' <!-- Je n'affiche pas d'emblée la visibilité de la couche -->
                }
				});
				});
	
	
	    // Ajout des données OSM
	
			
			map.addSource('mapbox-streets-v8', { <!-- J'ajoute la source pour affciher dessous les couches des données OSM -->
			type: 'vector',
			url: 'mapbox://mapbox.mapbox-streets-v8'});
		
		// Configuration de la couche de l'hydrographie

			map.addLayer({"id": "hydrologie", <!-- appel de couche car la source est la même que pour les routes (mapbox-streets-v8) -->
			"type": "line",
			"source": "mapbox-streets-v8",
			"source-layer": "waterway",
			'layout': {'visibility': 'none'},
			"paint": {"line-color": "#4dd2ff",
			"line-width": 5}
			});
			
			
			// Ajout batiments 3D OSM
		
			map.addLayer({
			'id': 'Batiments_3D',
			'source': 'mapbox-streets-v8', <!-- Bien ajouter mapbox-streets-v8 comme source, elle correspond à OSM dans Mapbox  -->
			'source-layer': 'building',
			'layout': {'visibility': 'none'},
			'filter': ['==', 'extrude', 'true'],
			'type': 'fill-extrusion', // On extrude les batiments 
			'minzoom': 15,
			'paint': {'fill-extrusion-color': '#555555', 'fill-extrusion-height': 
			{'type': 'identity','property': 'height'},
			'fill-extrusion-base': {'type': 'identity','property': 'min_height'},
			'fill-extrusion-opacity': 0.8
			}
			});	
			
		
			 
		// Ajout des bâtiments 
		
			map.addLayer({
			"id": "batiments",
			"type": "fill", 
			"source": "mapbox-streets-v8",
			"source-layer": "building",
			'layout': {'visibility': 'none'},
			"paint": {"fill-color": "#FEFEFE",
			"fill-opacity": 0.8}
			});


		// Configuration de la couche route

			map.addLayer({ <!-- On appel ici la couche de données des routes issues d’OSM -->

			"id": "Routes",
			"type": "line",
			"source": "mapbox-streets-v8",
			"layout": {'visibility': 'none'},
			"source-layer": "road",
			'layout': {'visibility': 'none'},
			"filter": ["all",  ["in", "track", "street"]],   <!-- On peut filtrer uniquement avec l'attribut "filter" les pistes forestières "track" et les petites voies "street", regarder toutes les options dans la doc Mapbox https://docs.mapbox.com/data/tilesets/reference/mapbox-streets-v8/#road-->
			"paint": {"line-color": "#FF7F50", "line-width": 1} // On définit la couleur des route à orange selon le code hexadécimal #FF7F50
			});
			
	     switchlayer = function (lname) {
            if (document.getElementById(lname + "CB").checked) {
                map.setLayoutProperty(lname, 'visibility', 'visible');
            } else {
                map.setLayoutProperty(lname, 'visibility', 'none');
           }
        }

				
		
				
			
	
							
			}); <!--}) En lien avec le map.on de la configuration de la source, ATTENTION il doit contenir tous les map.addLayer-->
			
			
			const geocoder = new MapboxGeocoder({
			accessToken: mapboxgl.accessToken,
			language: 'fr-FR', // Specify the language as German.
			mapboxgl: mapboxgl
			});
			map.addControl(geocoder, 'bottom-right');	
				
		
			// Ajout boutons navigation a la fin du script
			var nav = new mapboxgl.NavigationControl();
			map.addControl(nav, 'top-left');
						
						
			// Ajout Echelle cartographique a la fin du script
			map.addControl(new mapboxgl.ScaleControl({
			maxWidth: 120,
			unit: 'metric'}));
			
			
			//Intéractivité lors du clic
			
			map.on('click', function (e) { <!-- Evenement au clic sur la couche vannes  -->
			var features = map.queryRenderedFeatures(e.point, { layers: ['vannes'] });
			if (!features.length) {
			return;
			}
			var feature = features[0];
			var popup = new mapboxgl.Popup({ offset: [0, -15] })
			.setLngLat(feature.geometry.coordinates)
			.setHTML('<h3>' + feature.properties.type_vanne + '</h3>') <!-- Je lui fait afficher le champ type_vanne -->
			.addTo(map);
			});
			map.on('mousemove', function (e) {
			var features = map.queryRenderedFeatures(e.point, { layers: ['vannes'] });
			map.getCanvas().style.cursor = (features.length) ? 'pointer' : '';
			});
			
			//Interactivité au survol
			var popup = new mapboxgl.Popup({
			closeButton: false,
			closeOnClick: false });
			map.on('mousemove', function(e) { <!-- Evenement au survol -->
			var features = map.queryRenderedFeatures(e.point, { layers: ['bornes'] }); <!-- Je passe plusieurs couches dans le même événement hover au survol -->
			// Change the cursor style as a UI indicator.
			map.getCanvas().style.cursor = (features.length) ? 'pointer' : '';
			if (!features.length) {
			popup.remove();
			return; }
			var feature = features[0];
			var imageHTML = '<img id="popup-image" src="' + feature.properties.photo_1 + '">'; <!-- Je lui fait afficher le champ type_ouv et la photo des bornes du champ "photo_1"-->
			var popupContent = '<h3>' + feature.properties.type_ouv + '</h3>' + imageHTML;
			popup.setLngLat(feature.geometry.coordinates)
			.setHTML(popupContent) 
			.addTo(map);
			});
			
		
</script>

</section>
	</main>
	
	

	<footer>
		<a href="mailto:david.bonnet@etu.univ-amu.fr">David BONNET</a>
	</footer>
</body>
</html>
